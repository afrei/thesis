In this section, our goal is to define stability (and \(\omega\)-stability in particular) and show that theories which aren't \(\omega\)-stable cannot be uncountably categorical for any uncountable cardinality. 

In order to define stability we need to recall a few definitions and facts about types. 
Let \(\mcM\) be an \(\mcL\)-structure and \(A \subseteq M\). 
It will often be natural to want to add constant symbols for every element of \(A\) to our language. 
We will call the resulting language \(\mcL_A\). \(\mcM\) has a natural definition as an \(\mcL_A\)-structure. 
In general, we call the set of \(\mcL_A\)-sentences true in \(\mcM\) ``\(\Th_A(\mcM)\)'' and, in the special case where \(A = M\) we call it \(\eldiag(\mcM)\) or the ``elementary diagram of \(\mcM\)''. 

\section{Defining Types}

\begin{definition}\label{def_types}
Let \(A, \mcM, \mcL\) as above. 
An \(n\)-type over \(A\), \(p\), is a set of \(\mcL_A\)-formulae in \(n\) free variables (\(v_1, \ldots, v_n\)) for which \(p \cup \Th_A(\mcM)\) is satisfiable.
We say that \(p\) is complete if, for every \(\mcL_A\)-formula \(\phi(v_1, \ldots, v_n)\), either \(p \ni \phi\) or \(p \ni \neg \phi\). 
We call the set of all complete \(n\) types over \(A\) ``\(S_n^\mcM(A)\)''. 

In the event that \(A = \emptyset\), \(T\) is a complete theory and \(\mcM, \mcN \models T\), we observe that \(S_n^\mcM(\emptyset) = S_n^\mcN(\emptyset)\) as both consist of complete \(n\)-types consistent with \(T\). 
We define \(S_n(T) = S_n^\mcM(\emptyset)\).
\end{definition}

Let's consider a few simple examples of types when  \(\mcM = (\N,s)\), the natural numbers with successor and \(A = \{0\}\) (we've added a constant symbol for 0). 
One example or an incomplete type is when we take \(p = \{v_1 \neq 0\}\). 
As \(\N \models \phi(2)\) for all \(\phi \in p\), \(p \cup \Th_\emptyset(\N)\) must be satisfiable, and \(p\) is a type. 
Still, neither \(v_1 = s(s(s(0)))\) or its negation is in \(p\) so it is not complete. 

There is one clear source of complete types. 
Every element of \(\N\) has an associated complete type. 
Let \(p(v) = \{\phi(v) \mid \N \models \phi(1)\}\). 
As \(\N\) is a model realizing \(p \cup \Th_\emptyset(\N)\) when \(v_1\) is interpreted as 1, this set of formulae is a type. 
As every formula in one free variable is either true or false for 1, this type is complete. 
We say \(p\) is realized by 1. 
More generally, we say \(\bar{x} \in M^n\) realizes an \(n\)-type \(p\) if \(\mcM \models \phi(\bar{x})\) for all \(\phi \in p\).  

This, though, is not the only source of types. 
If we take \(p = \{v_1 \neq 0, v_1 \neq s^1(0), v_1 \neq s^2(0), \ldots\}\) we get a set of \(\mcL_{\{0\}}\)-formulae in one free variable. 
We note that \(p \cup \Th_{\{0\}}(\N)\) is satisfiable (as it is finitely satisfiable). 
We can extend \{p\} to a complete type, but that type cannot be realized by any natural number, since an element realizing \(p\) is greater than every natural number by construction. 
We see that it isn't always the case that a type is realized in every model, even though it is consistent with the theory of that model. 

\section{Defining Stability}

\begin{definition}\label{def_stability}
Let \(T\) be a complete theory in a countable language and \(\kappa\) be an infinite cardinal. 
\(T\) is \(\kappa\)-stable if \(|S_n^\mcM(A)| = \kappa\) whenever \(\mcM \models T\) and \(|A| = \kappa\). 
Note: \(\aleph_0\)-stable theories are called \(\omega\)-stable for historical reasons. 
\end{definition}

First, we will show that the theory of dense linear orders without endpoints is not \(\omega\)-stable. 
\(\mcM = (\R, <)\) is a model of this theory and \(A = \Q\) is a subset of size \(\aleph_0\). 
Still, every real number realizes a different type in \(S_1^\R(\Q)\) (as every two distinct real numbers have a rational number between them). 
So there must be at least as many types as there are real numbers; there are uncountably many types.  

Recall that we mentioned in the proof outline of Morley's Categoricity theorem that all uncountably categorical theories are \(\omega\)-stable. 
We mentioned the theory of infinite sets and the theory of (\(\Z, s\)) as uncountably categorical theories. 
Let's observe that both of these theories are \(\omega\)-stable. 

\begin{example}\label{example_omst_sets}
The theory of infinite sets is \omst. 
First, consider the complete 1-types, \(p(v_1)\). \(p(v_1)\) must assert either that \(v_1 = a\) for exactly \(a \in A\) or that \(v_1 \neq a\) for all \(a \in A\). 
Moreover, as the theory of infinite sets admits \qe all formulae are equivalent to boolean combinations of such formulae. % Add Citation 
We have now identified all 1-types (there is one for each element in \(A\) and one more for when \(v_1\) isn't in \(A\)). 
This can be easily extended to \(n\)-types for \(n > 1\)
\end{example}

\begin{example}\label{example_omst_Z}
The theory of \((\Z, s)\) is \omst. 
We will again consider 1-types and leave the general argument to the reader. 
We can assume, WLOG, that no two elements of \(A\) are in the same \(\Z\)-chain. 
Our 1-type either asserts that \(v_1\) is in the same \(\Z\)-chain as a single element of \(A\) and determines its position relative to that element, or asserts that \(v_1\) isn't in the same \(\Z\) chain as any element of \(A\). 
Note that the number of possibilities mentioned above is countable and that these possibilities are exhaustive.
I assert that if we know which of these possibilities is true of an element \(a\), i.e. what atomic formula \(\psi(a, \bar{b})\) hold for \(\bar{b} \in A\), we can determine the type of \(A\). 
It suffices to show that we can determine wether \(\phi(a, \bar{b})\) holds of \(a\) given that atomic information.  
Quantifier elminiation tells us that for all formulae \(\phi(\bar{v})\), \(\Th(\Z, s) \models \A \bar{v} \phi(\bar{v}) \psi(\bar{v})\) for some quantifier free \(\psi\).
Given an arbitrary \(\phi(a, \bar{b})\) with \(\bar{b} \in A\) we know that \(\phi(a, \bar{b}) \iff  \psi(a, \bar{b})\) and by hypothesis we know wether or not \(\psi(a, \bar{b})\) holds. 
This suffices to decide \(\phi(a, \bar{b})\) and show the \(\omega\)-stability of the theory of \((\Z, s)\).
\end{example}

\section{A Theorem about \(\omega\)-stability}
We now aim to show that no theory \(T\) can be uncountably categorical, unless it is \(\omega\)-stable.
It suffices to show that for all uncountable \(\kappa\) we can present two non-isomorphic models of \(T\) of cardinality \(\kappa\), given only that \(T\) is not \(\omega\)-stable.  
We will do so by finding one model realizing only countably many types over any countable set, and one realizing uncountably many types over some countable set. 
Clearly, two such models will not be isomorphic, so \(T\) will not be categorical. 

\subsection{Realizing Uncountably Many Types}
\begin{theorem}\label{theorem_realizing_uncountable_types}
If \(T\) is an \omst theory, there are models of \(T\) of any uncountable cardinality realizing uncountably many types over a countable set.
\end{theorem}

\begin{proof}
As \(T\) isn't \omst, for some countable \(A\) we have that \(|S_n^\mcM(A)|\) is uncountable. 
We can realize at least \(\aleph_1\) of these in some elementary extension of \(\mcM\) which can be taken to be of cardinality exactly \(\kappa\) for any desired uncountable \(\kappa\).
Say \(\{p_i\}\) is a set of \(\aleph_1\) many types from \(S_n^{\mcM}(A)\).
Let \(C = \{c_i| i \in \aleph_1\} \) be \(\aleph_1\) constant symbols in a new language \(\mcL^* = \mcL_\mcM \cup C\). 
Let \(\Gamma = T \cup \eldiag(\mcM) \cup \{p_i(c_i)\}\) (we assert each type \(p_i\) is realized by \(c_i\) giving us the realization of uncountably many types).
 
To show that \(\Gamma\) is finitely satisfiable, it will suffice to show that sets of the form \(\Gamma_0 = T \cup \eldiag(\mcM) \cup \bigcup_{i \in I}\bigcup_{\phi(c_i) \in (p_i)_0(c_i)} \phi(c_i)\) are satisfiable, where \((p_i)_0 \subseteq p_i\) are finite.  
\(\Gamma_0\) is satisfiable iff \(\Delta = T \cup \eldiag(\mcM) \cup \bigcup_{i \in I}\E x \bigwedge_{\phi(c_i) \in (p_i)_0(c_i)} \phi(x)\) is satisfiable.
For each of these existential sentences, \(\psi\), \(\mcM\) is either a model of \(\psi\) or of \(\neg \psi\). 
As these types are, by definition, consistent with \(\eldiag(\mcM)\), it must be that \(\mcM \models \psi\). 
Therefore, \(\mcM \models \Delta\) and \(\Gamma_0\) is satisfiable. 
By compactness, we have a model of \(\Gamma\) of cardinality \(|\mcL^*| \leq \kappa\) and by the upward L\"owenheim-Skolem theorem, a model of cardinality \(\kappa\).
\(\Gamma\) asserts that uncountably many types are realized over \(A\), as desired. 
\end{proof}

\subsection{Indiscernables}
Now, we must show the existence of a model of size \(\kappa\) which realizes only countably many types over every countable set. 
To do so, we will have to construct some machinery.
This will be our guiding intuition: to ensure our model is of size \(\kappa\), we will start out with \(\kappa\) many virtually identical (indiscernable) elements. 
To ensure our model is indeed a model of \(T\), we will add elements to whitness existentials. 
We will see that this method of construction will realize few types.

\begin{definition}\label{definition_order_indiscernibles}
Let \(\mcM\) be a model.
We say that a set \(\{x_i \in M \mid i \in I\}\) where \(I\) is an infinite ordered set is a sequence of \textit{order indiscernibles (of order type \(I\))} if, given two sequences from \(I\), 
\(i_1 < i_2 < \ldots < i_n\) and \(j_1 < j_2 < \ldots < j_n\), we will have \(\mcM \models \phi(i_1, \ldots, i_n) \iff \mcM \models \phi(j_1, \ldots, j_n)\). 
Note that the order for which \(i_1 < i_2\) is an ordering on \(M\).
The existence of this ordering on \(M\) in no way requires the binary relation symbol ``\(<\)'' to be in our language \(\mcL\). 
Intuitively, these elements cannot be distinguised based on first order properties, modulo their relative positions in \(M\).  
\end{definition}

Recall that the theory of dense linear orders without endpoints admits \qe and it's easy to see that any increasing sequence from such an order is a sequence of indiscernibles. 
Here, our ordering on the elements of the universe of our model agrees with the ordering present in the languge. 
If we removed the ordering from our language (i.e. we work in the language of sets) our order indiscernibles are still order indiscernibles. 

\begin{theorem}\label{theorem_order_indiscernibles}
Given an ordered set \(I\) and an \(\mcL\)-theory, \(T\), which has infinite models, there always exists an \(\mcM \models T\) containing a set of order insicernibles of order type \(I\). 
\end{theorem}

\begin{proof}
Let \(\mcL_I \supset \mcL\) be an extension of our language including a constant symbol corresponding to each \(i \in I\), that is \(\mcL' = \mcL \cup \{c_i \mid i \in I\}\).
We note that we can present a first order \(\mcL'\)-theory, \(T'\), such that all \(\mcM \models T'\) are models of \(T\) with a set of order indiscernibles of order type \(I\).
\(T'\) includes \(T\), \(\{c_i \neq c_j \mid i \neq j\}\) and \(\{\phi(c_{i_1}, \ldots, c_{i_n}) \iff \phi(c_{j_1}, \ldots, c_{j_n})\}\) for all \(\mcL\)-formulae \(\phi\), and all sequences \(i_1 < \ldots < i_n, j_1 < \ldots < j_n\). 
It suffices to show that finite subsets of \(T'\) are satisfiable. 
That this is true is an application of Ramsey's Theorem, which states: 
If \(S\) is an infinite set whose subsets of size \(n\) are colored with \(c\) different colors, there exists a \(T \subseteq S\) for which every subset of size \(n\) of \(T\) has the same color. 
(We will prove Ramsey's theorem, theorem \ref{ramseys_theorem}, in the appendix.)

Let \(\Phi\) be a finite set consisting of \(\mcL\)-formulae in at most \(k\) free variables. 
Let \(\mcM\) be an infinite model of \(T\). 
Let \(\mcL^* = \mcL \cup \{c_i | i \in \N\}\) where the \(c_i\)s are constant symbols. .
It suffices to show that \(\mcM\) is a model of the theory \(T^*\) including: \(T\), \(\{c_i \neq c_j \mid i \neq j\}\) and \(\{\phi(c_{i_1}, \ldots, c_{i_n}) \iff \phi(c_{j_1}, \ldots, c_{j_n})\}\) for all \(\phi \in \Phi\), and all sequences \(i_1 < \ldots < i_n, j_1 < \ldots < j_n\) of length at most \(k\). 
(All finite subsets of \(T'\) only include our indiscernability condition for finitely many formulae and finitely many constant symbols).

In applying Ramsey's Theorem, we let \(S = M\). 
We take \(n = k\) (that is we color subsets of size \(k\)).
We let our set of \(2^{|\Phi|}\) colors be the subsets of \(\Phi\). 
If \(N\) is a subset of \(S\) of size \(n\) let \(a_1 < \ldots < a_n\) enumerate its elements. 
Assign the set \(N\) the color \(\{\phi \in \Phi \mid \mcM \models \phi(\bar{a})\}\). 
If \(\phi\) has only \(m\) free variables and \(m < n\) we interpret \(\phi(\bar{a}\) as \(\phi(\bar{b})\) where \(\bar{b}\) is the first \(m\) elements of \(\bar{a}\).
Interpreting the \(c_i\)s as the elements of \(T\) (whose existence is guarunteed by Ramsey's Theorem) is sufficient by construction.

Thus, \(T'\) is satisfiable and its model is the desired \(\mcM\).
\end{proof}

\subsection{Realizing Only Countably Many Types}

\begin{definition}\label{definition_skolem_functions}
We recall that an \(\mcL\)-theory, \(T\), is said to have \textit{built-in Skolem functions} when for all \(\mcL\)-formulae \(\phi(v, \bar{w})\) is a function symbol \(f_\phi \in \mcL\) such that \(T \models \A \bar{w} [(\E v \phi(v, \bar{w})) \to \phi(f_\phi(\bar{w}), \bar{w})]\), in other words, the Skolem functions provide whitnesses for all existentials. 
\end{definition}

\begin{theorem}\label{theorem_skolem_function_extension}
Note that, for any \(\mcL\)-theory, \(T\), we can find \(\mcL^* \supseteq \mcL\) and \(T^* \supseteq T\) such that \(T^*\) has built in skolem functions. 
Moreover, if \(\mcM \models T\) we can extend \(\mcM\) to an \(\mcL^*\)-structure, \(\mcM^*\), such that \(\mcM^* \models T^*\). 
\end{theorem}

\begin{proof}
We will construct \(\mcL^*, T^*\) inductively. 
Let \(\mcL_0 = \mcL\) and \(T_0 = T\). 
For \(i > 0\) let \(\mcL_i = \mcL_i \cup \{f_\phi \mid \phi \text{ is an } \mcL_{i-1}\text{-formula}\}\) where \(f_\phi\) is a function symbol.
If \(\phi\) is a formula in \(n\) free variables, the arity of \(f_\phi\) is \(n-1\). 
\(T_i\) is \(T_{i-1} \cup \{\A \bar{w} [(\E v \phi(v, \bar{w})) \to \phi(f_\phi(\bar{w}), \bar{w})] \mid \phi \text{ is an } \mcL_{i-1}\text{-formula}\}\).
Taking \(\mcL^* = \bigcup_{i \in \N} \mcL_i\) and \(T^* = \bigcup_{i \in \N} T_i\) will have built in skolem functions by construction.

To show that \(\mcM^*\) exists, it suffices to show that, if \(\mcM \models T_i\) then \(\mcM \models T_{i+1}\) given the correct interpretation of the function symbols in \(\mcL_{i+1}\).
If \(\mcM \models \E x \phi(x, \bar{w})\) then it must be that, for some \(b \in M\) that \(\mcM \models \phi(b, \bar{w})\), so we let \(f_\phi(\bar{w}) = b\). 
Otherwise, we let \(f_\phi(\bar{w})\) be an arbitrary element of \(M\). 

Note that if \(\mcL\) is countable, then \(\mcL^*\) is countable as well as we add only countably many function symbols at each of the countably many stages.
\end{proof}

\begin{theorem}\label{theorem_tarski_vaught_test}
If \(\mcM \subseteq \mcN\) then \(\mcM \prec \mcN\) if and only if for every formula \(\phi(v, \bar{w})\), \(\bar{a} \in M\) and \(b \in N\) such that \(\mcN \models \phi(b, \bar{a})\) there is a \(c \in M\) such that \(\mcM \models \phi(c, \bar{a})\).
\end{theorem}

\begin{proof}
If \(\mcM \prec \mcN\) then \(\mcM \models \E x \phi(x, \bar{a}) \iff \mcN \models \E x \phi(x, \bar{a})\). This suffices to show the ``only if'' direction.

In the other direction, we show that \(\mcM \models \phi(\bar{a}) \iff \mcN \models \phi(\bar{a})\) by induction on formulae. 
As \(\mcM \subseteq \mcN\), \(\mcM \models \phi(\bar{a}) \iff \mcN \models \phi(\bar{a})\) holds for all atomic \(\phi\).
Assume for all \(\bar{a}\) that  \(\mcM \models \phi(\bar{a}) \iff \mcN \models \phi(\bar{a})\) and \(\mcM \models \psi(\bar{a}) \iff \mcN \models \psi(\bar{a})\).
It suffices to show:
\begin{enumerate}
\item \(\mcM \models \neg \phi(\bar{a}) \iff \mcN \models \neg \phi(\bar{a})\). By assumption \(\mcM \not \models \phi(\bar{a}) \iff  \mcN \not \models \phi(\bar{a})\) which gives us our desired result. 
\item \(\mcM \models (\phi\land\psi)(\bar{a}) \iff \mcN \models (\phi\land\psi)(\bar{a})\). If \(\mcM \models \phi(\bar{a})\) and \(\mcM \models \psi(\bar{a})\). By the inductive hypothesis,  \(\mcN \models \phi(\bar{a})\) and \(\mcN \models \psi(\bar{a})\). So \(\mcM \models (\phi \land \psi)(\bar{a}) \implies \mcN \models (\phi \land \psi)(\bar{a})\). The same argument applies in the other direction. 
\item \(\mcM \models \E v \phi(v, \bar{a}) \iff \mcN \models \E v \phi(v, \bar{a})\). If \(\mcM \models \E v \phi(v, \bar{a})\) then for some \(b\) \(\mcM \models \phi(b, \bar{a}) \iff \mcN \models \phi(b, \bar{a})\) by the induction hypothesis. If \(\mcN \models \E v \phi(v, \bar{a})\) then for some \(b\) we have \(\mcN \models \phi(b, \bar{a})\) and, by hypothesis, there is a \(c \in M\) for which \(\mcM \models \phi(c, \bar{a})\) so \(\mcM \models \E v \phi(v, \bar{a})\) as desired.    
\end{enumerate}
\end{proof}

\begin{cor}\label{closure_under_skolem_functions}
If \(T\) has built in skolem functions and \(\mcM \subseteq \mcN \models T\) then \(\mcM \prec \mcN\). 
As \(\mcM\) is closed under the skolem functions, we can whitness existentials in accordance with the hypothesis of our previous theorem. 
\end{cor}

\begin{definition}\label{definition_skolem_hull}
Let \(\mcM \models T\) where \(T\) has built in skolem functions. 
If \(A \subset M\) then we can take \(\mathcal{H}(A)\) which is the smallest submodel of \(\mcM\) containing \(A\).
As \(\mathcal{H}(A)\) is a submodel of \(\mcM\) it is closed under skolem functions, so \(\mathcal{H}(A) \prec \mcM\).
We call \(\mathcal{H}(A)\) the ``skolem hull'' of \(A\).
\end{definition}

\begin{definition}\label{definition_ehrenfeuct_mostowski_model}
If \(T\) is an \(\mcL\)-theory with build in skolem functions and infinite models, given any infinite ordered set \(I\), we find a \(\mcM \models T\) such that \(I \subset M\) is an infinte set of order indiscernibles. 
We call \(\mathcal{H}(I)\) an Ehrenfeucht-Mostowski model. 
Note that if \(\mcL\) is countable \(|\mathcal{H}(I)| = |I|\) as every element of \(\mathcal{H}(I)\) is an \(\mcL_{I}\)-term, of which there are \(|\mcL|+|I| = |I|\).
\end{definition}

\begin{theorem}\label{theorem_ehrenfeuct_mostowski_types}
Let \(T\) be an arbitrary theory and \((\kappa, <)\) be a set of order indiscernibles of order type \(\kappa\).
Let \(\mcM = \mathcal{H}((\kappa, <))\models T\). 
\(\mcM\) is a model of size \(\kappa\) realizing countably many types over any countable \(A\).
\end{theorem}

\begin{proof}
As every element of \(M\) (and of \(A\)) must be a Skolem term (i.e. of the form \(f_\phi(\bar{x})\) for some vector of indiscernables), it suffices to look at the types over countable subsets of \(\kappa\).
Let \(X\) be this countable subset of \(\kappa\). 
It suffices to show that for each fixed \(n, \phi\), terms of the form \(f_\phi(y_1, \ldots, y_n)\) realize only countably many types. 
(We then have divided \(M\) into countably many sets each realizing at most countably many types).
We see that \(f_\phi(y_1, \ldots, y_n)\) and \(f_\phi(z_1, \ldots, z_n)\) realize the same type if, for each \(i \leq n\) there is no \(x \in X\) between \(y_i\) and \(z_i\) or that \(y_i\) and \(z_i\) determine the same cut in \(X\).  
This is because indiscernability tells us \(\mcM \models \psi(f_\phi(\bar{y}), \bar{x}) \iff \mcM \models \psi(f_\phi(\bar{z}), \bar{x})\) when the relative orders of the indiscernibles in \(\bar{y}\bar{x}\) and in \(\bar{z}\bar{x}\) are the same. 
It now suffices to note that, as \(\kappa\) is well ordered, we get only countably many cuts of \(X\). 
This deals with the 1-types. Dealing with the \(n\)-types only requires dealing with \(n\)-tuples of formulae instead of the single formula \(\phi\) we adressed here. 
\end{proof}

\begin{theorem}\label{theorem_omega_stability_categoricity}
Any theory which is not \omst cannot be categorical in any uncountable cardinal. Contrapositively, all uncountably categorical theories are \(\omega\)-stable
\end{theorem}

\begin{proof}
We have succeded in showing that there is a model of any \(\omega\)-unstable theory realizing only countably many types over any countable set.
This model cannot be isomorphic to one realizing uncountably many types over a countable set, which we showed must exist as well. % reference the theorems from before
\end{proof}
